/*  v1.11.0  */
var e;const n="#cc6666",t="#f0c674",o=n,r=t,s=document.createElement("template");s.innerHTML=`\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">\n<style>\n\n:host {\n    display: block;\n    font-family: var(--ui-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI",\n      Roboto, Oxygen-Sans, Ubuntu, Cantarell,\n      "Helvetica Neue", "Source Sans Pro"), sans-serif;\n    line-height: 1.5;\n    margin-top: 8px;\n    --_base-00: var(--base-00, #35434e);\n    --_base-01: var(--base-01, #282a2e);\n    --_base-02: var(--base-02, #373b41);\n    --_base-03: var(--base-03, #969896);\n    --_base-04: var(--base-04, #b4b7b4);\n    --_base-05: var(--base-05, #c5c8c6);\n    --_base-06: var(--base-06, #e0e0e0);\n    --_base-07: var(--base-07, #ffffff);\n    --_base-08: var(--base-08, #8abeb7);\n    --_base-09: var(--base-09, #ec9c65);\n    --_base-0a: var(--base-0a, ${t});\n    --_base-0b: var(--base-0b, #b5bd68);\n    --_base-0c: var(--base-0c, ${n});\n    --_base-0d: var(--base-0d, #81a2be);\n    --_base-0e: var(--base-0e, #b294bb);\n    --_base-0f: var(--base-0f, #a3685a);\n    --_semantic-red: var(--semantic-red, ${o});\n    --_semantic-orange: var(--semantic-orange, ${r});\n\n  }\n  :host([hidden]) {\n    display: none;\n  }\n\n  slot { display: none; }\n\n  .original-content {\n    display: none;\n  }\n\n  .editors.hidden {\n    display: none;\n  }\n\n  .__code-playground-container {\n    display: flex;\n    flex-flow: column;\n    justify-content: space-between;\n    height: 100%;\n    min-width: 300px;\n    border-radius: 8px;\n    width: 100%;\n    margin: 0;\n    background: transparent\n  }\n\n  .__code-playground-editor {\n    border: 1px solid #ccc;\n    background: var(--base-00);\n    color: var(--base-05);\n  }\n\n  .__code-playground-container textarea {\n    display: block;\n\n    color: var(--text-color);\n    background: var(--ui-background);\n\n    min-height: 4em;\n    height: 100%;\n    width: 100%;\n\n    resize: vertical;\n\n    border: var(--ui-border, 1px solid rgba(0,0,0,.25));\n    outline: none;\n    font-family: var(--monospace-font-family), 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Fira Code', monospace;\n    font-size: 16px;\n    line-height: 1.2;\n  }\n\n\n  .__code-playground-container label {\n    display: block;\n    font-weight: 700;\n    padding-top: 4px;\n    padding-bottom: 4px;\n}\n\n\n  :host div.__code-playground-button-bar:not(.visible) {\n    display: none !important;\n  }\n\n  button svg {\n    height: 1em;\n    width: 1em;\n    margin-right: .55em;\n    vertical-align: -.12em;\n  }\n  \n\n  #run-button:not(.visible) {\n    display: none !important;\n  }\n\n  .__code-playground-result {\n    width: 100%;\n    margin: .5em 0 0 0;\n  }\n\n\n  .__code-playground-output {\n    display:  flex;\n    flex-flow: column;\n  }\n\n  .__code-playground-output:not(.visible) {\n    display: none !important;\n  }\n\n  .__code-playground-output textarea {\n    width: calc(100% - 16px);\n  }\n\n  .__code-playground-output button {\n    appearance: none;\n    font-family: var(--ui-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI",      Roboto, Oxygen-Sans, Ubuntu, Cantarell,      "Helvetica Neue", "Source Sans Pro"), sans-serif;\n    font-size: 1rem;\n    font-weight: 600;\n    border-radius: 8px;\n    border: 1px solid var(--base-05, #c5c8c6);\n    color: var(--base-00, #35434e);\n    background: var(--base-07, #ffffff);\n    padding: 4px 16px;\n    min-height: 42px;\n    min-width: 42px;\n    filter: drop-shadow(4px 4px 8px #00000020);\n  }\n\n  .__code-playground-output button:hover {\n    background: var(--base-06, #e0e0e0);\n    background-opacity: .4;\n\n  }\n\n  .__code-playground-output button:active {\n    background: var(--base-07, #ffffff);\n    color: var(--base-00, #35434e);\n    filter: drop-shadow(0px 0px 4px #00000040);\n  }\n\n\n  .__code-playground-output button:disabled, \n  .__code-playground-output button:disabled:hover {\n    background: var(--base-07, #ffffff);\n    color: var(--base-04, #b4b7b4);\n    filter: none;\n  }\n\n\n\n\n  .__code-playground-output .row {\n    display: flex;\n    flex-flow: row;\n    justify-content: space-between;\n  }\n\n  .__code-playground-output .row > * {\n    flex: .25;\n  }\n\n  .__code-playground-output .row > *:not(:first-child) {\n    margin-left: 8px;\n  }\n\n  .__code-playground-output .row > *:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .__code-playground-output .row > *:first-child {\n    margin-left: 0;\n  }\n\n  .__code-playground-output .row > *:last-child {\n    margin-right: 0;\n  }\n\n  .__code-playground-output .stack {\n    display: flex;\n    flex-flow: column;\n    margin-top: 8px;\n    margin-bottom: 8px;\n  }\n\n\n  .__code-playground-console {\n    display: block;\n    max-height: 50vh;\n    margin: .5em 0 0 0;\n    overflow: auto;\n\n    padding: 8px 8px 8px 1em;\n    border-radius: 8px;\n\n    color: var(--_base-05);\n    background: var(--_base-00);\n    border: var(--ui-border, 1px solid rgba(0, 0, 0, .2));\n\n    font-family: var(--monospace-font-family), 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Fira Code', monospace;\n    font-size: 1em;\n\n    white-space: pre-wrap;\n  }\n\n  .__code-playground-console:not(.visible) {\n    display: none !important;\n  }\n\n\n  .__code-playground-console::selection, \n  .__code-playground-console *::selection {\n    background: var(--selection-background, var(--_base-01));\n    color: var(--selection-color, inherit);\n  }\n\n\n  .__code-playground-console .sep {\n    color: var(--_base-05);\n  }\n  .__code-playground-console .index {\n    color: var(--_base-05);\n    opacity: .3;\n    float: left;\n    width: 0;\n    font-style: italic;\n  }\n  .__code-playground-console .boolean {\n    color: var(--_base-0e);\n    font-weight: bold;\n  }\n  .__code-playground-console .empty {\n    color: var(--_base-0e);\n    font-style: italic;\n  }\n  .__code-playground-console .null {\n    color: var(--_base-0e);\n    font-style: italic;\n  }\n  .__code-playground-console .string {\n    color: var(--_base-0a);\n    font-weight: bold;\n  }\n  .__code-playground-console .function {\n    color: var(--_base-0b);\n  }\n  .__code-playground-console .number {\n    color: var(--_base-0e);\n  }\n  .__code-playground-console .property {\n    color: var(--_base-0b);\n  }\n  .__code-playground-console .object {\n    color: var(--_base-0b);\n  }\n  .__code-playground-console .error {\n    display: block;\n    width: calc(100% + 16px);\n    padding-right: 4px;\n    padding-top: 8px;\n    padding-bottom:8px;\n    padding-left: 6px;\n    margin: -8px -20px;\n    background: var(--red-800);\n    color: white;\n    border-left: 8px solid var(--_semantic-red);\n  }\n  .__code-playground-console .warning {\n    color: var(--_semantic-orange);\n  }\n  .__code-playground-console .log {\n    color: var(--blue--200);\n  }\n  .__code-playground-console .group {\n    font-weight: bold;\n  }\n  \n\n\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --selection-background: var(--primary-color);\n    --selection-color: #fff;\n  }\n}\n  \n\n/* Tomorrow Comment */\n.hljs-comment {\n    color: var(--_base-04);\n}\n\n/* Function (JS) and tag (HTML) names */\n.hljs-tag, .hljs-title {\n    color: var(--_base-0a);\n}\n  \n/* Tomorrow Red */\n.hljs-variable,\n.hljs-attribute,\n.hljs-tag,\n.hljs-regexp,\n.ruby .hljs-constant,\n.xml .hljs-tag .hljs-title,\n.xml .hljs-pi,\n.xml .hljs-doctype,\n.html .hljs-doctype,\n.css .hljs-id,\n.css .hljs-class,\n.css .hljs-pseudo {\n  color: var(--_base-0c);\n}\n\n/* Tomorrow Orange */\n.hljs-number,\n.hljs-preprocessor,\n.hljs-built_in,\n.hljs-literal,\n.hljs-params,\n.hljs-constant {\n  color: var(--_base-09);\n  font-weight: normal;\n}\n\n/* Tomorrow Yellow */\n.ruby .hljs-class .hljs-title,\n.css .hljs-rules .hljs-attribute {\n    color: var(--_base-0a);\n}\n\n/* Tomorrow Green */\n.hljs-string,\n.hljs-value,\n.hljs-inheritance,\n.hljs-header,\n.ruby .hljs-symbol,\n.xml .hljs-cdata {\n  color: var(--_base-0b);\n}\n\n/* Tomorrow Aqua */\n.css .hljs-hexcolor {\n  color: var(--_base-08);\n}\n\n/* Tomorrow Blue */\n.hljs-function,\n.python .hljs-decorator,\n.python .hljs-title,\n.ruby .hljs-function .hljs-title,\n.ruby .hljs-title .hljs-keyword,\n.perl .hljs-sub,\n.javascript .hljs-title,\n.coffeescript .hljs-title {\n  color: var(--_base-0d);\n  font-weight: bold;\n}\n\n/* Tomorrow Purple */\n.hljs-keyword,\n.javascript .hljs-function {\n  color: var(--_base-0e);\n  font-weight: bold;\n}\n\n.hljs {\n  display: block;\n  background: var(--_base-00);\n  color: var(--_base-05);\n  padding: 0.5em;\n}\n\n.coffeescript .javascript,\n.javascript .xml,\n.tex .hljs-formula,\n.xml .javascript,\n.xml .vbscript,\n.xml .css,\n.xml .hljs-cdata {\n    opacity: 0.5;\n}\n\n// Rouge typographic adjustments.\n// See https://github.com/rouge-ruby/rouge/wiki/List-of-tokens\n\n.highlight .c1,     // Single line comment\n.highlight .cm      // Multiline comment\n  {\n    font-style: italic;\n}\n\n.highlight .k,       // keywords\n.highlight .kc,       // keywords constant\n.highlight .kd,       // keywords declaration\n.highlight .kn,       // keywords namespace\n.highlight .kp,       // keywords pseudi\n.highlight .kr,       // keywords reserved\n.highlight .kt,       // keywords type\n.highlight .kv       // keywords variable\n{\n  font-weight: bold;\n}\n\n.CodeMirror {\n  font-family: var(--monospace-font-family), 'Berkeley Mono', 'JetBrains Mono', 'IBM Plex Mono', 'Fira Code', monospace;\n  color: inherit;\n}\n.cm-s-tomorrow-night.CodeMirror { background: transparent; }\n.cm-s-tomorrow-night div.CodeMirror-selected { background: var(--selection-background, var(--_base-01)); color: var(--selection-color, inherit);}\n\n.cm-s-tomorrow-night .CodeMirror-line::selection, .cm-s-tomorrow-night .CodeMirror-line > span::selection, .cm-s-tomorrow-night .CodeMirror-line > span > span::selection { background: var(--selection-background, rgba(45, 45, 45, 0.99)); color: var(--selection-color, inherit);}\n\n.cm-s-tomorrow-night .CodeMirror-line::-moz-selection, .cm-s-tomorrow-night .CodeMirror-line > span::-moz-selection, .cm-s-tomorrow-night .CodeMirror-line > span > span::-moz-selection { background: var(--selection-background, rgba(45, 45, 45, 0.99)); color: var(--selection-color, inherit);}\n\n.cm-s-tomorrow-night .CodeMirror-gutters { background: transparent; border-right: 0px; }\n.cm-s-tomorrow-night .CodeMirror-guttermarker { color: var(--_base-0c); }\n.cm-s-tomorrow-night .CodeMirror-guttermarker-subtle { color: var(--_base-03); }\n.cm-s-tomorrow-night .CodeMirror-linenumber { color: var(--_base-04); opacity: .7; }\n.cm-s-tomorrow-night .CodeMirror-cursor { border-left: 1px solid var(--_base-0d); }\n\n.cm-s-tomorrow-night span.cm-comment { color: var(--_base-04); }\n.cm-s-tomorrow-night span.cm-atom { color: var(--_base-0e); }\n.cm-s-tomorrow-night span.cm-number { color: var(--_base-0e); }\n\n.cm-s-tomorrow-night span.cm-property, .cm-s-tomorrow-night span.cm-attribute { color: var(--_base-0a); }\n.cm-s-tomorrow-night span.cm-keyword { color: var(--_base-0c); }\n.cm-s-tomorrow-night span.cm-string { color: var(--_base-0b); }\n\n.cm-s-tomorrow-night span.cm-variable { color: var(--_base-0b); }\n.cm-s-tomorrow-night span.cm-variable-2 { color: var(--_base-0d); }\n.cm-s-tomorrow-night span.cm-def { color: var(--_base-09); }\n.cm-s-tomorrow-night span.cm-bracket { color: var(--_base-05); }\n.cm-s-tomorrow-night span.cm-tag { color: var(--_base-0a); }\n.cm-s-tomorrow-night span.cm-link { color: var(--_base-0e); }\n.cm-s-tomorrow-night span.cm-error { background: var(--_base-0c); color: var(--_base-03); }\n\n.cm-s-tomorrow-night .CodeMirror-activeline-background { background: var(--_base-02); }\n.cm-s-tomorrow-night .CodeMirror-matchingbracket { text-decoration: underline; color: white !important; }    \n\n\n.CodeMirror .marked div.CodeMirror-linenumber {\n  opacity: 1;\n  color: var(--base-07, #fff);\n}\n\n.CodeMirror .marked pre.CodeMirror-line::before {\n  content: "";\n  position: absolute;\n  top: 0; \n  left: 0;\n  width: 100%; \n  height: 100%;  \n  opacity: .5; \n  z-index: -1;\n  background: var(--editor-marked-line, var(--cyan-700, #0c6abe)) !important;\n}\n</style>\n<slot name="style"></slot>\n`;class a extends HTMLElement{static get observedAttributes(){return Object.values(a.attributes)}attributeChangedCallback(e,n,t){if(n===t)return;const o=a.attributes;e===o.markLine||e===o.markJavascriptLine?h(this.shadowRoot,"javascript",t):e===o.markHtmlLine?h(this.shadowRoot,"html",t):e===o.showLineNumbers&&this.shadowRoot.querySelectorAll("textarea + .CodeMirror").forEach((e=>{var n;return null===(n=null==e?void 0:e.CodeMirror)||void 0===n?void 0:n.setLineNumbers(this.showLineNumbers)}))}constructor(){var e;super(),this.dirty=!1,this.edited=!1,this.resetting=!1,this.timers={},this.moduleMap=null!==(e=window.moduleMap)&&void 0!==e?e:{},this.attachShadow({mode:"open",delegatesFocus:!0})}disconnectedCallback(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.resizeObserver=null,this.shadowRoot.innerHTML="",this.dirty=!0,this.runTimer&&clearTimeout(this.runTimer),this.consoleUpdateTimer&&clearTimeout(this.consoleUpdateTimer),this.edited=!1,this.resetting=!1}connectedCallback(){const e=this.shadowRoot;this.id||(this.id=i()),e.appendChild(s.content.cloneNode(!0));const n=e.querySelector("slot[name=style]");if(n){const t=n.assignedNodes().map((e=>e.innerHTML)).join("").trim();if(t){const n=document.createElement("style");n.innerHTML=t,e.appendChild(n)}}const t=document.createElement("div");this.containerId=i(),t.id=this.containerId,t.innerHTML='<div inert class="original-content" translate="no"><slot name="html"></slot><slot name="javascript"></slot></div>\n\n  <div class="__code-playground-container" translate="no">\n  \n    <div class="editors hidden" part="editors"></div>\n\n    <div class="__code-playground-button-bar" part="button-bar">\n      <button id="reset-button" part="button" disabled><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="history" class="svg-inline--fa fa-history fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 255.532c.252 136.64-111.182 248.372-247.822 248.468-64.014.045-122.373-24.163-166.394-63.942-5.097-4.606-5.3-12.543-.443-17.4l16.96-16.96c4.529-4.529 11.776-4.659 16.555-.395C158.208 436.843 204.848 456 256 456c110.549 0 200-89.468 200-200 0-110.549-89.468-200-200-200-55.52 0-105.708 22.574-141.923 59.043l49.091 48.413c7.641 7.535 2.305 20.544-8.426 20.544H26.412c-6.627 0-12-5.373-12-12V45.443c0-10.651 12.843-16.023 20.426-8.544l45.097 44.474C124.866 36.067 187.15 8 256 8c136.811 0 247.747 110.781 248 247.532zm-167.058 90.173l14.116-19.409c3.898-5.36 2.713-12.865-2.647-16.763L280 259.778V116c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v168.222l88.179 64.13c5.36 3.897 12.865 2.712 16.763-2.647z"></path></svg>Reset</button>\n\n      <button id="run-button" part="button"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6zM48 453.5v-395c0-4.6 5.1-7.5 9.1-5.2l334.2 197.5c3.9 2.3 3.9 8 0 10.3L57.1 458.7c-4 2.3-9.1-.6-9.1-5.2z"></path></svg>Run</button>\n    </div>\n\n    <div class="__code-playground-result" translate="no">\n      <div class="__code-playground-output" part="output" translate="no"></div>\n    </div>\n\n  </div>',e.appendChild(t),e.getElementById("run-button").addEventListener("click",(()=>this.run())),e.getElementById("reset-button").addEventListener("click",(()=>this.reset())),e.addEventListener("slotchange",(()=>{this.dirty=!0,requestAnimationFrame((()=>this.update()))})),this.resizeObserver=new ResizeObserver((()=>{requestAnimationFrame((()=>{e.querySelectorAll("textarea + .CodeMirror").forEach((e=>{var n;return null===(n=null==e?void 0:e.CodeMirror)||void 0===n?void 0:n.refresh()}))}))})),this.updateButtonBar()}get outputStylesheets(){return this.hasAttribute("outputStylesheets")?this.getAttribute("outputStylesheets").split(" "):[]}set outputStylesheets(e){this.setAttribute("outputStylesheets",e.join(" "))}get autorun(){if(!this.hasAttribute("autorun"))return 1e3;const e=this.getAttribute("autorun");return"never"===e?"never":isFinite(parseFloat(e))?parseFloat(e):1e3}set autorun(e){this.setAttribute("autorun",e.toString()),this.updateButtonBar()}get buttonBarVisibility(){var e,n;const t=null!==(n=null!==(e=this.getAttribute("button-bar-visibility"))&&void 0!==e?e:this.getAttribute("buttonBarVisibility"))&&void 0!==n?n:"auto";return"auto"===t?this.edited||"never"===this.autorun?"visible":"hidden":t}set buttonBarVisibility(e){this.setAttribute("buttonBarVisibility",e)}get buttonBarVisible(){var e,n;return null!==(n=null===(e=this.shadowRoot.querySelector(".__code-playground-button-bar"))||void 0===e?void 0:e.classList.contains("visible"))&&void 0!==n&&n}updateButtonBar(){const e=this.buttonBarVisibility,n=this.shadowRoot.querySelector(".__code-playground-button-bar");if(!n)return;const t=this.shadowRoot.getElementById("reset-button");t&&(t.disabled=!this.edited);const o=this.shadowRoot.getElementById("run-button");o&&(o.disabled=!1),null==o||o.classList.toggle("visible","never"===this.autorun),null==n||n.classList.toggle("visible","visible"===e)}update(){var e;if(!this.dirty)return;this.dirty=!1,this.updateButtonBar();const n=this.shadowRoot,t=n.querySelector(".editors");if(!t)return;const o=[...n.querySelectorAll(".original-content slot")];let r="";for(const n of o){let t=n.assignedNodes().map((e=>e.innerHTML)).join("");if(t){t=t.replace(/<!-- -->/g,"");const o=n.name.toLowerCase();r+=`<label part="label">${null!==(e={html:"HTML",javascript:"JavaScript",css:"CSS",json:"JSON"}[o])&&void 0!==e?e:o}</label>\n        <div part="editor" class="__code-playground-editor ${o}">\n            <textarea spellcheck="false" autocorrect="off"  autocapitalize="off" data-language="${o}">${t}</textarea> \n        </div>`}}t.innerHTML=r,"CodeMirror"in window&&void 0!==window.CodeMirror&&(this.resizeObserver.disconnect(),n.querySelectorAll(".editors textarea").forEach((e=>{var t;this.resizeObserver.observe(e.parentElement);const o=null!==(t={ts:"typescript",typescript:"typescript",js:"javascript",javascript:"javascript",json:{name:"javascript",json:!0},css:"css",html:{name:"xml",htmlMode:!0}}[e.dataset.language])&&void 0!==t?t:"javascript",r=CodeMirror.fromTextArea(e,{lineNumbers:this.showLineNumbers,lineWrapping:!0,mode:o,theme:"tomorrow-night"});var s;r.setValue(p(e.value)),r.setSize("100%","100%"),"javascript"===e.dataset.language&&h(n,"javascript",this.getAttribute("markLine")),h(n,e.dataset.language,this.getAttribute(`mark${s=e.dataset.language,s.charAt(0).toUpperCase()+s.slice(1)}Line`)),r.on("change",(()=>this.editorContentChanged()))})),t.classList.remove("hidden")),"never"!==this.autorun&&this.run(),"CodeMirror"in window&&void 0!==window.CodeMirror&&setTimeout((()=>n.querySelectorAll("textarea + .CodeMirror").forEach((e=>{var n;return null===(n=null==e?void 0:e.CodeMirror)||void 0===n?void 0:n.refresh()}))),128)}async run(){var e,n,t,o,r,s;const a=this.shadowRoot,i=a.querySelector(".__code-playground-result");if(!i)return;i.querySelectorAll(".__code-playground-result > script").forEach((e=>i.removeChild(e))),this.pseudoConsole.clear();let l="";const c=a.querySelector('textarea[data-language="html"] + .CodeMirror');l=c?null===(e=c.CodeMirror)||void 0===e?void 0:e.getValue():null!==(t=null===(n=a.querySelector('textarea[data-language="html"]'))||void 0===n?void 0:n.value)&&void 0!==t?t:"";const u=l.match(/<script.*>.*?<\/script>/g);null==u||u.forEach((e=>{const n=e.match(/<script([^>]*?)>(.*)<\/script>/),t=new RegExp("[\\s\\r\\t\\n]*([a-z0-9\\-_]+)[\\s\\r\\t\\n]*=[\\s\\r\\t\\n]*(['\"])((?:\\\\\\2|(?!\\2).)*)\\2","ig"),o={};let r;for(;r=t.exec(n[1]);)o[r[1]]=r[3];const s=document.createElement("script");Object.keys(o).forEach((e=>s[e]=o[e]));try{s.textContent=this.processLiveCodeJavascript(n[2]),i.appendChild(s)}catch(e){this.pseudoConsole.error(e.message)}}));try{this.outputStylesheets.forEach((e=>{const n=e.trim();n.length>0&&(l=`<link rel="stylesheet" href="${n}"></link>${l}`)}));const e=a.querySelector("div.__code-playground-result > div.__code-playground-output");e&&(l?e.classList.add("visible"):e.classList.remove("visible"),e.innerHTML=l)}catch(e){this.pseudoConsole.error(e.message)}const d=a.querySelector('textarea[data-language="javascript"] + .CodeMirror');let p="";p=d?null===(o=d.CodeMirror)||void 0===o?void 0:o.getValue():null!==(s=null===(r=a.querySelector('textarea[data-language="javascript"]'))||void 0===r?void 0:r.value)&&void 0!==s?s:"";for(const e of l.matchAll(/\<([a-zA-Z0-9]+\-[a-zA-Z0-9]*)[^\>]*\>/g))await customElements.whenDefined(e[1]);const h=document.createElement("script");h.type="module";try{h.textContent=this.processLiveCodeJavascript(p),i.appendChild(h)}catch(e){this.pseudoConsole.error(e.message)}const m=window.onerror;window.onerror=(e,n,t,o,r)=>{n===window.location.href&&(0===t?"function"==typeof(null==r?void 0:r.toString)?this.pseudoConsole.error(e+r.toString()):this.pseudoConsole.error(e):this.pseudoConsole.error("Line "+(t-1)+"\n   "+e))},setTimeout((()=>{window.onerror=m}),500)}editorContentChanged(){this.resetting||(this.edited=!0,this.updateButtonBar(),"never"!==this.autorun&&(this.runTimer&&clearTimeout(this.runTimer),0===this.autorun?this.run():this.runTimer=setTimeout((()=>this.run()),this.autorun)))}reset(){this.resetting=!0,this.runTimer&&clearTimeout(this.runTimer),this.shadowRoot.querySelectorAll(".original-content slot").forEach((e=>{var n;const t=e.assignedNodes().map((e=>e.innerText)).join("");if(t){const o=this.shadowRoot.querySelector(`textarea[data-language="${e.name}"] + .CodeMirror`);if(o)null===(n=o.CodeMirror)||void 0===n||n.setValue(p(t)),"javascript"===e.name?h(this.shadowRoot,"javascript",this.markLine):h(this.shadowRoot,e.name,this.getAttribute(`mark-${e.name}-line`));else{const n=this.shadowRoot.querySelector(`textarea[data-language="${e.name}"]`);n&&(n.value=p(t))}}})),this.updateButtonBar(),this.run(),this.edited=!1,this.resetting=!1,this.updateButtonBar()}get outputElement(){return this.shadowRoot.querySelector("div.__code-playground-output")}get pseudoConsole(){const e=this.shadowRoot;let n=e.querySelector(".__code-playground-console");if(!n){const t=e.querySelector(".__code-playground-result");if(!t)return{...window.console,catch:()=>{}};n=document.createElement("pre"),n.classList.add("__code-playground-console"),n.setAttribute("part","console"),t.appendChild(n)}const t=()=>{this.consoleUpdateTimer&&clearTimeout(this.consoleUpdateTimer),this.consoleUpdateTimer=setTimeout((()=>{n.innerHTML=this.consoleContent,this.consoleContent?n.classList.add("visible"):n.classList.remove("visible"),n.scrollTop=n.scrollHeight}),100)},o=(e,o)=>{var r,s;let a=null!==(s=null===(r=this.consoleContent)||void 0===r?void 0:r.split("\n"))&&void 0!==s?s:[];a.length>1e3&&(a=a.slice(a.length-1e3+1)),this.consoleUpdateTimer&&clearTimeout(this.consoleUpdateTimer),n.classList.add("visible");const i=this;var l,c;l=e=>{var t;i.consoleContent=(o?`<span class="${o}">`:"")+a.join("\n")+"&nbsp;&nbsp;".repeat(null!==(t=parseInt(n.dataset["group-level"]))&&void 0!==t?t:0)+e+(o?"</span>":""),n.innerHTML=i.consoleContent,n.scrollTop=n.scrollHeight},c=()=>t(),l(e+"\n"),c()};return{...window.console,assert:(e,...n)=>{if(!e){let e=u(n);e.length>0&&(e=":\n   "+e),o("Assertion failed"+e,"error")}},catch:e=>{const n=e.stack.split("at ")[1].match(/:([0-9]+):([0-9]+)/)||[];o('<span class="error">'+(n[1]?"Line "+parseInt(n[1])+"\n   ":"")+e.message+"</span>")},clear:()=>{this.consoleContent="",t()},debug:(...e)=>o(u(e)),dir:(...e)=>o(u(e)),error:(...e)=>o(u(e),"error"),group:(...e)=>{var t;arguments.length>0&&o(u(e),"group"),n.dataset["group-level"]=Number((null!==(t=parseInt(n.dataset["group-level"]))&&void 0!==t?t:0)+1).toString()},groupCollapsed:(...e)=>{var t;arguments.length>0&&o(u(e),"group"),n.dataset["group-level"]=Number((null!==(t=parseInt(n.dataset["group-level"]))&&void 0!==t?t:0)+1).toString()},groupEnd:()=>{var e;n.dataset["group-level"]=Number((null!==(e=parseInt(n.dataset["group-level"]))&&void 0!==e?e:0)-1).toString()},info:(...e)=>o(u(e),"info"),log:(...e)=>o(u(e),"log"),warn:(...e)=>o(u(e),"warning"),time:e=>{this.timers[e]=Date.now()},timeEnd:(e,...n)=>{if(!this.timers[e])return o(u(n),"log");const t=Date.now()-this.timers[e];return o(t>1e3?`${u(n)}\n${e}: ${Number(t/1e3).toFixed(2)}s`:`${u(n)}\n${e}: ${t}ms`,"log")}}}processLiveCodeJavascript(e){if(!e)return"";const n=Date.now().toString(26).slice(-2)+Math.floor(1e5*Math.random()).toString(26);e=(e=(e=e.replace(/([^a-zA-Z0-9_-]?)document(\s*\.\s*querySelector\s*\()/g,"$1output"+n+"$2")).replace(/([^a-zA-Z0-9_-]?)document(\s*\.\s*querySelectorAll\s*\))/g,"$1output"+n+"$2")).replace(/([^a-zA-Z0-9_-]?)document(\s*\.\s*)getElementById\s*\(/g,"$1output"+n+"$2querySelector('#'+");const t=[];return e=e.replace(/([^a-zA-Z0-9_-]?import.*)('.*'|".*");/g,((e,n,o)=>(t.push([e,n,o.slice(1,o.length-1)]),`/* ${n}${o} */`))),t.map((e=>this.moduleMap[e[2]]?`${e[1]} "${this.moduleMap[e[2]]}";`:e[0])).join("")+`const playground${n} = document.getElementById("${this.id}").shadowRoot.host;`+`const console${n} = window.console; window.console = playground${n}.pseudoConsole;`+`const output${n} = playground${n}.outputElement;(async function() {try {\n`+e+`\n} catch(err) { typeof console.catch === 'function' ? console.catch(err) : console.error(err) }}()); window.console = console${n};`}get showLineNumbers(){return this.hasAttribute("show-line-numbers")||this.hasAttribute("showLineNumbers")}set showLineNumbers(e){this.removeAttribute("showLineNumbers"),e?this.setAttribute("show-line-numbers",""):this.removeAttribute("show-line-numbers")}get markLine(){return this.getAttribute("mark-line")||this.getAttribute("markLine")||this.getAttribute("mark-javascript-line")||this.getAttribute("markJavaScriptLine")}set markLine(e){this.removeAttribute("markLine"),this.setAttribute("mark-line",e)}}function i(){return"i"+(Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36))}a.attributes={showLineNumbers:"show-line-numbers",buttonBarVisibility:"button-bar-visibility",autorun:"autorun",markLine:"mark-line",markJavascriptLine:"mark-javascript-line",markHtmlLine:"mark-html-line"};const l="  ";function c(e,n,t={}){var o,r;if(null!==(o=t.quote)&&void 0!==o||(t.quote='"'),null!==(r=t.ancestors)&&void 0!==r||(t.ancestors=[]),"boolean"==typeof n)return{text:`<span class="boolean">${d(String(n))}</span>`,itemCount:1,lineCount:1};if("number"==typeof n)return{text:`<span class="number">${d(String(n))}</span>`,itemCount:1,lineCount:1};if("string"==typeof n)return 0===t.quote.length?{text:d(n),itemCount:1,lineCount:n.split(/\r\n|\r|\n/).length}:{text:`<span class="string">${d(t.quote+n+t.quote)}</span>`,itemCount:1,lineCount:n.split(/\r\n|\r|\n/).length};if("function"==typeof n){let e="";return e=d("toString"in n?n.toString():String(n)),{text:`<span class="function">ƒ  ${e}</span>`,itemCount:1,lineCount:e.split(/\r\n|\r|\n/).length}}if(null==n)return{text:`<span class="null">${d(String(n))}</span>`,itemCount:1,lineCount:1};if(e>20)return{text:'<span class="sep">(...)</span>',itemCount:1,lineCount:1};if(Array.isArray(n)){if(t.ancestors.includes(n))return{text:'<span class="sep">[...]</span>',itemCount:1,lineCount:1};const o=[];for(let r=0;r<n.length;r++)Object.keys(n).includes(Number(r).toString())?o.push(c(e+1,n[r],{ancestors:[...t.ancestors,n]})):o.push({text:'<span class="empty">empty</span>',itemCount:1,lineCount:1});const r=o.reduce(((e,n)=>e+n.itemCount),0),s=o.reduce(((e,n)=>Math.max(e,n.lineCount)),0);return r>5||s>1?{text:"<span class='sep'>[</span>\n"+l.repeat(e+1)+o.map(((e,n)=>'<span class="index">'+n+"</span>"+e.text)).join("<span class='sep'>, </span>\n"+l.repeat(e+1))+"\n"+l.repeat(e)+"<span class='sep'>]</span>",itemCount:r,lineCount:2+o.reduce(((e,n)=>e+n.lineCount),0)}:{text:"<span class='sep'>[</span>"+o.map((e=>e.text)).join("<span class='sep'>, </span>")+"<span class='sep'>]</span>",itemCount:Math.max(1,r),lineCount:1}}if(n instanceof Element){if(t.ancestors.includes(n))return{text:'<span class="object">Element...</span>',itemCount:1,lineCount:1};let e=`<${n.localName}`,o=1;if(Array.from(n.attributes).forEach((t=>{e+=" "+t.localName;const o=n.getAttribute(t.localName);o.length>0&&(e+='="'+o+'"')})),e+=">",n.innerHTML){let t=n.innerHTML.split("\n");t.length>4&&(t=[...t.slice(0,5),"(...)\n"]),e+=t.join("\n"),o+=t.length}return e+=`</${n.localName}>`,{text:`<span class="object">${d(e)}</span>`,itemCount:1,lineCount:o}}if("object"==typeof n){if(t.ancestors.includes(n))return{text:'<span class="sep">{...}</span>',itemCount:1,lineCount:1};if(n instanceof Map){const o=Object.fromEntries(n),r=c(e,o,{ancestors:[...t.ancestors,n]});return{...r,text:"<span class=object>Map</span>"+r.text}}if(n instanceof Set){const o=Array.from(n),r=c(e,o,{ancestors:[...t.ancestors,n]});return{...r,text:"<span class=object>Set</span>"+r.text}}if("toString"in n){const e=n.toString();if("[object Object]"!==e)return{text:d(e),itemCount:1,lineCount:1}}let o=Object.keys(n);if(Object.getOwnPropertyNames(n).forEach((e=>{o.includes(e)||o.push(e)})),Object.getPrototypeOf(n)!==Object.prototype&&(o=o.filter((e=>!e.startsWith("_")))),0===o.length&&"function"==typeof o.toString){const e=n.toString();return"[object Object]"===e?{text:'<span class="sep">{}</span>',itemCount:1,lineCount:1}:{text:e,itemCount:1,lineCount:e.split(/\r\n|\r|\n/).length}}const r=o.sort().map((o=>{if("object"==typeof n[o]&&null!==n[o]){let r=c(e+1,n[o],{ancestors:[...t.ancestors,n]});return r.itemCount>500&&(r={text:"<span class='sep'>(...)</span>",itemCount:1,lineCount:1}),{text:`<span class="property">${o}</span><span class='sep'>: </span>${r.text}`,itemCount:r.itemCount,lineCount:r.lineCount}}if("function"==typeof n[o])return{text:`<span class="property">${o}</span></span><span class='sep'>: </span><span class='function'>ƒ (...)</span>`,itemCount:1,lineCount:1};const r=c(e+1,n[o],{ancestors:[...t.ancestors,n]});return{text:`<span class="property">${o}</span></span><span class='sep'>: </span>${r.text}`,itemCount:r.itemCount,lineCount:r.lineCount}})),s=r.reduce(((e,n)=>e+n.itemCount),0),a=r.reduce(((e,n)=>e+n.lineCount),0);return s<5?{text:"<span class='sep'>{</span>"+r.map((e=>e.text)).join("</span><span class='sep'>, </span>")+"<span class='sep'>}</span>",itemCount:s,lineCount:a}:{text:"<span class='sep'>{</span>\n"+l.repeat(e+1)+r.map((e=>e.text)).join("</span><span class='sep'>,</span>\n"+l.repeat(e+1))+"\n"+l.repeat(e)+"<span class='sep'>}</span>",itemCount:s,lineCount:a+2}}return{text:String(n),itemCount:1,lineCount:1}}function u(e){const n=e[0],t=e.slice(1);return"string"==typeof n&&n.includes("%")&&t.length?n.replace(/(%[oscdif]|%(\d*)\.(\d*)[dif])/g,((e,n,o="",r)=>{if("%o"===n)return c(0,t.shift()).text;if("%s"===n)return t.shift();if("%c"===n)return`</span><span style="${t.shift()}">`;const s=t.shift();let a=null;return"f"===n.substr(-1)&&"number"==typeof s?a=isNaN(parseInt(r,10))?s:s.toFixed(r):"string"==typeof s&&(a=parseInt(s,10)),""===o?a:c(0,a).text.padStart(o," ")})):e.map((e=>c(0,e,{quote:""}).text)).join(" ")}function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function p(e){return(e=(e=e.trim()).replace(/<!--.*-->\n?/g,"")).split("\n").map((e=>"//"===e.trim()?"":e)).join("\n")}function h(e,n,t){var o;if(void 0===t)return;const r=null===(o=e.querySelector(`textarea[data-language="${n}"] + .CodeMirror`))||void 0===o?void 0:o.CodeMirror;if(r){for(let e=r.doc.firstLine();e<=r.doc.lastLine();e++)r.doc.removeLineClass(e,"wrap","marked");if("string"==typeof t)for(let e of t.split(","))if(e=e.trim(),""!==e&&"none"!==e){if(/\d+-\d+/.test(e)){let[,e,n]=t.match(/(\d+)-(\d+)/);for(let t=parseInt(e);t<=Math.max(parseInt(e),parseInt(n));t++)r.doc.addLineClass(t-1,"wrap","marked");return}r.doc.addLineClass(parseInt(t)-1,"wrap","marked")}}}null!==(e=customElements.get("code-playground"))&&void 0!==e||customElements.define("code-playground",a);export{a as CodePlaygroundElement};
